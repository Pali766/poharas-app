<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Poharas / Admin App</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- -----------------------------
     Role selection
------------------------------ -->
<div id="roleSelection">
  <h1>Hogyan szeretnéd futtatni a programot?</h1>
  <button id="adminBtn">Rendszergazda</button>
  <button id="workerBtn">Poharas</button>
</div>

<!-- -----------------------------
     Admin belépés kód
------------------------------ -->
<div id="adminLogin" class="hidden">
  <h1>Admin belépés</h1>
  <input type="text" id="adminCode" placeholder="Írd be a belépési kódot">
  <button id="adminSubmit">Belépés</button>
  <p id="adminError" style="color:red; margin-top:10px;"></p>
</div>

<!-- -----------------------------
     Poharas belépés kód
------------------------------ -->
<div id="workerLogin" class="hidden">
  <h1>Poharas belépés</h1>
  <input type="text" id="workerCode" placeholder="Írd be a belépési kódot">
  <button id="workerSubmit">Belépés</button>
  <p id="workerError" style="color:red; margin-top:10px;"></p>
</div>

<!-- -----------------------------
     Admin felület
------------------------------ -->
<div id="adminUI" class="hidden">
  <header><h1>Admin felület</h1></header>
  <main id="adminMain"></main>
</div>

<!-- -----------------------------
     Poharas felület
------------------------------ -->
<div id="poharasUI" class="hidden">
  <header><h1>Poharas felület</h1></header>
  <main id="poharasMain"></main>
</div>

<script>
/* -----------------------------
     Példa data
------------------------------ */
const DRINKS = [
  {name:"Sör", price:450, stock:20},
  {name:"Üdítő", price:350, stock:15},
  {name:"Bor", price:600, stock:10}
];

/* -----------------------------
     Admin kódok
------------------------------ */
const ADMIN_CODES = {
  "Admin2026/1": "Peti",
  "Admin2026/2": "Jani"
};

/* -----------------------------
     Poharas kódok
     (P+vezeték+keresztnév+születésnap)
------------------------------ */
const WORKER_CODES = {
  "PPJ01": "Péter J.",
  "PMK15": "Márta K."
};

/* -----------------------------
     DOM elemek
------------------------------ */
const roleSelection = document.getElementById('roleSelection');
const adminBtn = document.getElementById('adminBtn');
const workerBtn = document.getElementById('workerBtn');

const adminLogin = document.getElementById('adminLogin');
const adminCodeInput = document.getElementById('adminCode');
const adminSubmit = document.getElementById('adminSubmit');
const adminError = document.getElementById('adminError');

const workerLogin = document.getElementById('workerLogin');
const workerCodeInput = document.getElementById('workerCode');
const workerSubmit = document.getElementById('workerSubmit');
const workerError = document.getElementById('workerError');

const adminUI = document.getElementById('adminUI');
const poharasUI = document.getElementById('poharasUI');
const adminMain = document.getElementById('adminMain');
const poharasMain = document.getElementById('poharasMain');

/* -----------------------------
     Role selection gombok
------------------------------ */
adminBtn.addEventListener("click", ()=>{
  roleSelection.classList.add('hidden');
  adminLogin.classList.remove('hidden');
});

workerBtn.addEventListener("click", ()=>{
  roleSelection.classList.add('hidden');
  workerLogin.classList.remove('hidden');
});

/* -----------------------------
     Admin belépés ellenőrzés
------------------------------ */
adminSubmit.addEventListener("click", ()=>{
  const code = adminCodeInput.value.trim();
  if(ADMIN_CODES[code]){
    adminLogin.classList.add('hidden');
    adminUI.classList.remove('hidden');
    loadAdmin();
  } else {
    adminError.textContent = "Hibás kód!";
  }
});

/* -----------------------------
     Poharas belépés ellenőrzés
------------------------------ */
workerSubmit.addEventListener("click", ()=>{
  const code = workerCodeInput.value.trim();
  if(WORKER_CODES[code]){
    workerLogin.classList.add('hidden');
    poharasUI.classList.remove('hidden');
    loadPoharas();
  } else {
    workerError.textContent = "Hibás kód!";
  }
});

/* -----------------------------
     Admin felület betöltés
------------------------------ */
function loadAdmin(){
  adminMain.innerHTML="";
  const table = document.createElement('table');
  const header = document.createElement('tr');
  header.innerHTML="<th>Ital neve</th><th>Ár</th><th>Készlet</th><th>Művelet</th>";
  table.appendChild(header);

  DRINKS.forEach((drink,i)=>{
    const tr = document.createElement('tr');
    tr.innerHTML=`<td>${drink.name}</td><td>${drink.price}</td><td>${drink.stock}</td>`;
    const td = document.createElement('td');

    const btnInc = document.createElement('button');
    btnInc.textContent="+";
    btnInc.addEventListener("click", ()=>{
      drink.stock++; loadAdmin();
    });

    const btnDec = document.createElement('button');
    btnDec.textContent="-";
    btnDec.addEventListener("click", ()=>{
      if(drink.stock>0) drink.stock--; loadAdmin();
    });

    td.appendChild(btnInc);
    td.appendChild(btnDec);
    tr.appendChild(td);
    table.appendChild(tr);
  });

  adminMain.appendChild(table);

  const addBtn = document.createElement('button');
  addBtn.textContent = "Új ital hozzáadása";
  addBtn.className="addDrink";
  addBtn.addEventListener("click", ()=>{
    const name = prompt("Ital neve:"); if(!name) return;
    const price = parseInt(prompt("Ár:")); if(isNaN(price)) return;
    DRINKS.push({name:name, price:price, stock:0});
    loadAdmin();
  });
  adminMain.appendChild(addBtn);
}

/* -----------------------------
     Poharas felület betöltés
------------------------------ */
let bottleCount = 0;
function loadPoharas(){
  poharasMain.innerHTML="";
  DRINKS.forEach((drink)=>{
    const div = document.createElement('div');
    div.className="drinkItem";
    div.innerHTML=`<span>${drink.name} - ${drink.price} Ft - Készlet: ${drink.stock}</span>`;
    const btn = document.createElement('button');
    btn.textContent="Eladom / Visszaváltom";
    btn.addEventListener("click", ()=>{
      if(drink.stock>0){
        drink.stock--;
        bottleCount++;
        loadPoharas();
      } else alert("Nincs készleten!");
    });
    div.appendChild(btn);
    poharasMain.appendChild(div);
  });

  const info = document.createElement('div');
  info.className="info";
  info.textContent=`Visszaváltott üvegek száma: ${bottleCount}`;
  poharasMain.appendChild(info);
}
</script>

</body>
</html>
