<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Poharas / Admin App</title>
<style>
body { margin:0; font-family: system-ui, sans-serif; background:#f0f0f0; }
h1 { text-align:center; margin:20px; }
.hidden { display:none; }

/* Role selection */
#roleSelection { display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; }
#roleSelection button { margin:10px; padding:15px 30px; font-size:18px; cursor:pointer; }

/* Poharas UI */
#poharasUI { padding:20px; }
#poharasMain { margin-top:20px; }
.drinkItem { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
.drinkItem button { margin-left:10px; padding:5px 10px; }

/* Admin UI */
#adminUI { padding:20px; }
#adminMain { margin-top:20px; }
table { border-collapse:collapse; width:100%; }
table, th, td { border:1px solid #aaa; }
th, td { padding:8px; text-align:left; }
button { cursor:pointer; }
</style>
</head>
<body>

<!-- Role selection -->
<div id="roleSelection">
  <h1>Hogyan szeretnéd futtatni a programot?</h1>
  <a href="admin.html"><button>Rendszergazda</button></a>
  <a href="poharas.html"><button>Poharas</button></a>
</div>

<!-- Poharas felület -->
<div id="poharasUI" class="hidden">
  <header>
    <h1>Poharas felület</h1>
  </header>
  <main id="poharasMain"></main>
</div>

<!-- Admin felület -->
<div id="adminUI" class="hidden">
  <header>
    <h1>Admin felület</h1>
  </header>
  <main id="adminMain"></main>
</div>

<script>
const DRINKS = [
  {name:"Sör", price:450, stock:20},
  {name:"Üdítő", price:350, stock:15},
  {name:"Bor", price:600, stock:10}
];

// DOM elemek & Role selection gombok
document.addEventListener("DOMContentLoaded", () => {
  const roleSelection = document.getElementById('roleSelection');
  const adminUI = document.getElementById('adminUI');
  const poharasUI = document.getElementById('poharasUI');
  const poharasMain = document.getElementById('poharasMain');
  const adminMain = document.getElementById('adminMain');

  document.getElementById('adminBtn').onclick = () => {
    roleSelection.classList.add('hidden');
    adminUI.classList.remove('hidden');
    loadAdmin();
  };

  document.getElementById('workerBtn').onclick = () => {
    roleSelection.classList.add('hidden');
    poharasUI.classList.remove('hidden');
    loadPoharas();
  };
});


document.getElementById('workerBtn').addEventListener('click', ()=>{
  roleSelection.classList.add('hidden');
  poharasUI.classList.remove('hidden');
  loadPoharas();
});

// Poharas felület betöltése
function loadPoharas(){
  poharasMain.innerHTML="";
  DRINKS.forEach((drink)=>{
    const div = document.createElement('div');
    div.className="drinkItem";
    div.innerHTML=`<span>${drink.name} - ${drink.price} Ft - Készlet: ${drink.stock}</span>`;
    const btn = document.createElement('button');
    btn.textContent="Eladom / Visszaváltom";
    btn.addEventListener('click', ()=>{
      if(drink.stock>0){ 
        drink.stock--; 
        bottleCount++; 
        updatePoharas(); 
      } else {
        alert("Nincs készleten!");
      }
    });
    div.appendChild(btn);
    poharasMain.appendChild(div);
  });
  updatePoharas();
}

function updatePoharas(){
  const info = document.createElement('div');
  info.innerHTML=`<p>Visszaváltott üvegek száma: ${bottleCount}</p>`;
  poharasMain.appendChild(info);
}

// Admin felület betöltése
function loadAdmin(){
  adminMain.innerHTML="";
  const table = document.createElement('table');
  const header = document.createElement('tr');
  header.innerHTML="<th>Ital neve</th><th>Ár</th><th>Készlet</th><th>Művelet</th>";
  table.appendChild(header);

  DRINKS.forEach((drink)=>{
    const tr = document.createElement('tr');
    tr.innerHTML=`<td>${drink.name}</td><td>${drink.price}</td><td>${drink.stock}</td>`;
    const td = document.createElement('td');
    const btnInc = document.createElement('button');
    btnInc.textContent="+";
    btnInc.addEventListener('click', ()=>{ drink.stock++; loadAdmin(); });
    const btnDec = document.createElement('button');
    btnDec.textContent="-";
    btnDec.addEventListener('click', ()=>{ if(drink.stock>0) drink.stock--; loadAdmin(); });
    td.appendChild(btnInc);
    td.appendChild(btnDec);
    tr.appendChild(td);
    table.appendChild(tr);
  });

  adminMain.appendChild(table);

  const addBtn = document.createElement('button');
  addBtn.textContent="Új ital hozzáadása";
  addBtn.addEventListener('click', ()=>{
    const name = prompt("Ital neve:");
    if(!name) return;
    const price = parseInt(prompt("Ár:"));
    if(isNaN(price)) return;
    DRINKS.push({name:name, price:price, stock:0});
    loadAdmin();
  });
  adminMain.appendChild(addBtn);
}
</script>

</body>
</html>
